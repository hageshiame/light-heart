# 🎮 Light Heart Game Backend Environment Configuration

# ============================================
# 服务器配置
# ============================================

# 服务器端口
PORT=3000

# 环境模式 (development|production|test)
NODE_ENV=development

# CORS 允许的来源（多个用逗号分隔）
CORS_ORIGIN=http://localhost:3001,http://localhost:3002,http://127.0.0.1:3001

# ============================================
# 数据库配置 (MySQL)
# ============================================

# MySQL 连接配置
DB_HOST=localhost
DB_PORT=3306
DB_USER=root
DB_PASSWORD=
DB_NAME=light_heart_game

# 连接池设置
DB_CONNECTION_LIMIT=10
DB_QUEUE_LIMIT=0
DB_ENABLE_KEEP_ALIVE=true
DB_KEEP_ALIVE_INITIAL_DELAY=30000

# ============================================
# JWT 与认证
# ============================================

# JWT 签名密钥（生产环境应使用强随机字符串）
JWT_SECRET=dev-secret-key-change-in-production

# JWT 过期时间
JWT_EXPIRE=7d

# 微信小游戏配置
WECHAT_APP_ID=your_wechat_app_id
WECHAT_APP_SECRET=your_wechat_app_secret
WECHAT_TOKEN_ENDPOINT=https://api.weixin.qq.com/sns/jscode2session

# ============================================
# 安全与反作弊
# ============================================

# 签名密钥（用于分数验证）
SIGN_KEY=anti-cheat-signature-key

# 反作弊阈值
ANTICHEAT_SCORE_SPIKE_THRESHOLD=0.5        # 50% 以上分数增长视为异常
ANTICHEAT_TIME_ANOMALY_THRESHOLD=5000      # 5 秒内完成关卡视为异常
ANTICHEAT_MEMORY_CHECK_INTERVAL=10000      # 10 秒检查一次内存

# ============================================
# 日志与监控
# ============================================

# 日志级别 (error|warn|info|debug)
LOG_LEVEL=info

# 启用请求日志
LOG_REQUESTS=true

# 启用性能监控
ENABLE_PERFORMANCE_MONITOR=true

# ============================================
# 特性开关
# ============================================

# 启用本地开发模式（跳过微信验证）
DEV_MODE=true

# 启用数据库自动初始化（development 时有用）
AUTO_INIT_DB=false

# 启用 Mock 数据
USE_MOCK_DATA=false

# ============================================
# 缓存与性能
# ============================================

# Redis 连接（可选）
REDIS_ENABLED=false
REDIS_HOST=localhost
REDIS_PORT=6379
REDIS_PASSWORD=

# 排行榜缓存更新间隔（毫秒）
LEADERBOARD_CACHE_TTL=300000

# 在线玩家缓存
PLAYER_CACHE_TTL=600000

# ============================================
# 邮件与通知（可选）
# ============================================

# 邮件服务
MAIL_ENABLED=false
MAIL_HOST=smtp.example.com
MAIL_PORT=587
MAIL_USER=noreply@example.com
MAIL_PASSWORD=

# 推送服务
PUSH_ENABLED=false
PUSH_SERVICE_URL=https://push.example.com

# ============================================
# 第三方服务
# ============================================

# CDN 配置
CDN_ENDPOINT=https://cdn.example.com
CDN_BUCKET=light-heart-game

# 数据分析
ANALYTICS_ENABLED=false
ANALYTICS_API_KEY=

# ============================================
# 生产环境覆盖
# ============================================

# 如果你需要在不同环境中使用不同的配置，
# 创建对应的 .env 文件：
# - .env.development
# - .env.production
# - .env.test

# 然后在启动时指定：
# NODE_ENV=production node dist/server.js
